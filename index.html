<html>

<head>
    <meta charset="utf-8">
    <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/brython@3.10.0/brython.min.js">
    </script>
    <script type="text/javascript"
        src="https://cdn.jsdelivr.net/npm/brython@3.10.0/brython_stdlib.js">
    </script>
</head>

<body onload="brython()">

    <h1>ç½‘çº¢é¤å…æ¢åº—ç¬”è®°ï¼ˆè½¯æ–‡ï¼‰ç”Ÿæˆå™¨</h1>
    <input type="text" id = "xx" placeholder ="ä»Šå¤©å»å“ªåƒ:">  
    <button id = "btn">æ¢åº—
    <button id = "test">2  
    <span id="output"></span>

<!--input/output-->
    <script type ="text/python" id="script0">
        from browser import document,alert
        import random
        import json 
        


        def show(e):
            document['output'] <= output_text
            alert('a')
            document['output'] <= 'a'
            document <= "Hello !"

        document['text'].bind('input',show_text)
        document['btn'].bind('click',show)  
        data = json.load(open("pack.json", encoding="utf-8"))
        é‡å¤åº¦ = 1

        output_text=''

        def generator_1(trans,xx):
            global output_text
            body = random.choice(data[trans])
            body += "\n\n"
            body = body.replace("place", xx)
            output_text += body
            return ()

        def generator_1_and(trans,xx):
            global output_text
            body = random.choice(data[trans])
            body = body.replace("place", xx)  
            output_text += body
            return ()

        def æ´—ç‰Œéå†(åˆ—è¡¨):
            global é‡å¤åº¦
            æ±  = list(åˆ—è¡¨) * é‡å¤åº¦
            while True:
                random.shuffle(æ± )
                for å…ƒç´  in æ± :
                    yield å…ƒç´ 
                    
        nxa = æ´—ç‰Œéå†(data['surrounding_atmosphere'])
        nfl = æ´—ç‰Œéå†(data['food_list'])            

        def generator_2(null,xx):
            tmp = ""
            global output_text
            for x in xx:
                tmp = ""
                tmp = str()
                while ( len(tmp) < 130 ) :
                        tmp += next(null)
                        tmp += "\n"
                tmp = tmp.replace("place",xx)
            tmp += "\n\n"
            output_text += tmp
            return()

        if __name__ == '__main__':

            xx=input('ä»Šå¤©å»å“ªåƒ:')
            generator_1("summary",xx)
            generator_1("reason",xx)
            output_text +="ğŸ¡ç¯å¢ƒ\n"
            generator_1_and("surrounding_type",xx)
            generator_2(nxa,xx)
            output_text +="ğŸ¸æ¨èå¿…ç‚¹\n"
            generator_1_and("food",xx)
            generator_2(nfl,xx)
            generator_1("tip",xx)
            print(output_text)


    </script>

</body>

</html>
